<!doctype html>
<html lang="zh">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="robots" content="index, follow" />
        {% block seo %}{% endblock %}

        <title>
            {% if section.title %}{{ section.title }} - {% endif %} {% if
            page.title %}{{ page.title }} - {% endif %} {{ config.title }}
        </title>

        <!-- Medium Style CSS -->
        <link rel="stylesheet" href="/css/medium.css" />

        <!-- Favicon -->
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link rel="alternate icon" type="image/png" href="/favicon.png" />

        {% block extra_head %}{% endblock %}
    </head>
    <body>
        <!-- Header -->
        <header id="site-header">
            <div class="header-inner">
                <a href="/" class="site-title">
                    {{ config.title }}
                    <span class="subtitle">æç‘œ è¯—æ­Œ</span>
                </a>

                <nav class="header-nav" id="header-nav">
                    <div class="main-nav" id="main-nav">
                        <a href="/">é¦–é¡µ</a>
                        <a href="/hanxuema1995/">æ±—è¡€é©¬</a>
                        <a href="/search/">æœç´¢</a>
                        <a href="/tags/">æ ‡ç­¾</a>
                    </div>

                    <button
                        class="theme-toggle"
                        id="theme-toggle"
                        aria-label="åˆ‡æ¢ä¸»é¢˜"
                    >
                        â˜€ï¸
                    </button>

                    <button
                        class="mobile-menu-btn"
                        id="mobile-menu-btn"
                        aria-label="èœå•"
                    >
                        â˜°
                    </button>
                </nav>
            </div>
        </header>

        <!-- Main Content -->
        <main>
            <div class="container content-area">
                {% block content %}{% endblock %}
            </div>
        </main>

        <!-- Footer -->
        <div class="site-footer">
            <div class="container">
                <p>Â© 2025 {{ config.title }} Â· æç‘œ (1956-)</p>
                <p class="footer-subtitle">
                    ä¸­å›½å½“ä»£è¥¿éƒ¨è¯—æ­Œä»£è¡¨è¯—äºº Â· ã€Šæ±—è¡€é©¬ã€‹è¯—é›†æ•°å­—æ¡£æ¡ˆé¦†
                </p>
                <div
                    style="
                        margin-top: 8px;
                        font-size: 0.85rem;
                        color: var(--fg-muted);
                        display: flex;
                        justify-content: center;
                        gap: 1rem;
                    "
                >
                    <a href="https://github.com/lukethecat/liyugoetry.com"
                        >GitHub</a
                    >
                    <span>|</span>
                    <a href="/about/">å…³äº</a>
                    <span>|</span>
                    <span style="color: var(--fg-primary)"
                        >Powered by Zola</span
                    >
                </div>
            </div>
        </div>

        <!-- Scroll to Top -->
        <button
            class="scroll-top-btn"
            id="scroll-top-btn"
            aria-label="è¿”å›é¡¶éƒ¨"
        >
            â†‘
        </button>

        <!-- Scripts -->
        <script>
            // Mobile Menu Toggle
            const mobileMenuBtn = document.getElementById("mobile-menu-btn");
            const headerNav = document.getElementById("header-nav");

            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener("click", () => {
                    headerNav.classList.toggle("open");
                    const isOpen = headerNav.classList.contains("open");
                    mobileMenuBtn.setAttribute("aria-expanded", isOpen);
                });
            }

            // Theme Toggle
            const themeToggle = document.getElementById("theme-toggle");
            const storedTheme = localStorage.getItem("theme");

            if (storedTheme === "dark") {
                document.documentElement.setAttribute("data-theme", "dark");
                themeToggle.textContent = "ğŸŒ™";
            } else if (storedTheme === "light") {
                document.documentElement.setAttribute("data-theme", "light");
                themeToggle.textContent = "â˜€ï¸";
            } else {
                // Check system preference
                const prefersDark = window.matchMedia(
                    "(prefers-color-scheme: dark)",
                ).matches;
                if (prefersDark) {
                    document.documentElement.setAttribute("data-theme", "dark");
                    themeToggle.textContent = "ğŸŒ™";
                }
            }

            themeToggle?.addEventListener("click", () => {
                const currentTheme =
                    document.documentElement.getAttribute("data-theme");
                // Default to auto (system) if no theme set
                if (!currentTheme) {
                    const prefersDark = window.matchMedia(
                        "(prefers-color-scheme: dark)",
                    ).matches;
                    if (prefersDark) {
                        document.documentElement.setAttribute(
                            "data-theme",
                            "light",
                        );
                        localStorage.setItem("theme", "light");
                        themeToggle.textContent = "â˜€ï¸";
                    } else {
                        document.documentElement.setAttribute(
                            "data-theme",
                            "dark",
                        );
                        localStorage.setItem("theme", "dark");
                        themeToggle.textContent = "ğŸŒ™";
                    }
                } else if (currentTheme === "light") {
                    document.documentElement.setAttribute("data-theme", "dark");
                    localStorage.setItem("theme", "dark");
                    themeToggle.textContent = "ğŸŒ™";
                } else {
                    document.documentElement.setAttribute(
                        "data-theme",
                        "light",
                    );
                    localStorage.setItem("theme", "light");
                    themeToggle.textContent = "â˜€ï¸";
                }
            });

            // Scroll to Top Button
            const scrollTopBtn = document.getElementById("scroll-top-btn");

            const toggleScrollButton = () => {
                if (window.scrollY > 300) {
                    scrollTopBtn.classList.add("visible");
                } else {
                    scrollTopBtn.classList.remove("visible");
                }
            };

            if (scrollTopBtn) {
                window.addEventListener("scroll", toggleScrollButton);
                toggleScrollButton();

                scrollTopBtn.addEventListener("click", () => {
                    window.scrollTo({ top: 0, behavior: "smooth" });
                });
            }

            // Close mobile menu when clicking outside
            document.addEventListener("click", (e) => {
                if (
                    !headerNav.contains(e.target) &&
                    !mobileMenuBtn.contains(e.target)
                ) {
                    headerNav.classList.remove("open");
                    mobileMenuBtn.setAttribute("aria-expanded", "false");
                }
            });

            // Header scroll effect
            const header = document.getElementById("site-header");
            let lastScroll = 0;

            window.addEventListener("scroll", () => {
                const currentScroll = window.scrollY;

                if (currentScroll > 50) {
                    header.classList.add("scrolled");
                } else {
                    header.classList.remove("scrolled");
                }

                lastScroll = currentScroll;
            });

            // Highlight active nav item based on current page
            function highlightActiveNav() {
                const path = window.location.pathname;
                const navLinks = document.querySelectorAll(".main-nav a");

                navLinks.forEach((link) => {
                    const href = link.getAttribute("href");
                    if (href === path) {
                        link.setAttribute("aria-current", "page");
                    } else if (path.startsWith(href) && href !== "/") {
                        link.setAttribute("aria-current", "page");
                    }
                });
            }

            highlightActiveNav();
        </script>

        {% block extra_js %}{% endblock %}
    </body>
</html>
