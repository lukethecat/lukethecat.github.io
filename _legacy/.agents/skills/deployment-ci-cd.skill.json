{
  "name": "deployment-ci-cd",
  "version": "1.0.0",
  "description": "Deployment and CI/CD management for liyupoetry.com website",
  "category": "deployment",
  "entry_point": "skills/deployment-ci-cd.skill.json",
  "created": "2026-02-03",
  "last_used": "2026-02-03",
  "author": "AI Agent System",

  "dependencies": ["zola-build", "github-actions", "validation-testing"],

  "parameters": {
    "deployment_targets": ["github-pages", "cloudflare-pages"],
    "build_tool": "zola",
    "ci_provider": "github-actions",
    "validation_required": true
  },

  "capabilities": [
    "Analyze deployment configuration",
    "Fix deployment issues",
    "Configure CI/CD workflows",
    "Validate deployment success",
    "Troubleshoot deployment failures",
    "Manage deployment secrets",
    "Monitor deployment status"
  ],

  "workflow": {
    "steps": [
      "Check current deployment status",
      "Analyze CI/CD configuration",
      "Identify deployment issues",
      "Fix configuration problems",
      "Test deployment locally",
      "Update CI/CD workflows",
      "Validate deployment results",
      "Document changes"
    ],
    "validation": {
      "required_checks": [
        "Homepage accessible (HTTP 200)",
        "Key pages accessible (HTTP 200)",
        "Static resources loaded",
        "CI/CD workflow successful"
      ]
    }
  },

  "configuration_files": [
    ".github/workflows/ci.yml",
    "config.toml",
    "Makefile",
    "static/CNAME"
  ],

  "environment_variables": {
    "required": ["GITHUB_TOKEN"],
    "optional": ["CF_API_TOKEN", "CF_ACCOUNT_ID"]
  },

  "common_issues": [
    {
      "issue": "Pages return 404",
      "cause": "Incomplete deployment or misconfiguration",
      "solution": "Check CI logs, verify build output, ensure all files deployed"
    },
    {
      "issue": "CI workflow fails",
      "cause": "Missing dependencies or configuration errors",
      "solution": "Check error logs, update workflow configuration, test locally"
    },
    {
      "issue": "Deployment not triggered",
      "cause": "GitHub Actions configuration issues",
      "solution": "Verify workflow triggers, check repository settings"
    }
  ],

  "examples": [
    {
      "scenario": "Fix 404 error on specific page",
      "action": "Run validation script, check build output, verify deployment"
    },
    {
      "scenario": "Update deployment configuration",
      "action": "Modify CI workflow, test locally, commit and push changes"
    },
    {
      "scenario": "Add new deployment target",
      "action": "Configure new provider, add secrets, update workflow"
    }
  ],

  "tools": [
    "validate_deployment.sh",
    "make clean && make content",
    "curl for HTTP validation",
    "git for version control"
  ],

  "post_deployment_rules": {
    "mandatory_verification": true,
    "instructions": "After every deployment (push to main), the Agent MUST:\n1. Check the GitHub Actions run status.\n2. Verify the live site (GitHub Pages: https://lukethecat.github.io) returns HTTP 200.\n3. Verify the Cloudflare mirror (if active: https://www.liyupoetry.com) returns HTTP 200.\n4. Report success/failure back to the user."
  },

  "notes": [
    "GitHub Pages is primary deployment target",
    "Cloudflare Pages requires additional configuration",
    "Always validate deployment after changes",
    "Keep deployment documentation updated"
  ],

  "related_skills": [
    "zola-build",
    "github-actions",
    "cloudflare-pages",
    "validation-testing"
  ]
}
