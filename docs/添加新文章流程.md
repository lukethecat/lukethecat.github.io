# 添加新文章流程指南

## 网站架构说明

本网站基于 **Zola** 静态网站生成器构建，采用年份分类的文章组织方式。

## 文章目录结构

```
content/
├── _index.md                    # 主页配置
├── YYYY/                        # 年份目录
│   ├── _index.md               # 年份索引配置
│   └── 文章标题/
│       └── index.md            # 文章内容
└── static/                      # 静态页面
```

## 添加新文章的完整流程

### 1. 创建文章目录和文件

```bash
# 创建年份目录（如果是新年份）
mkdir -p content/2025

# 创建文章目录
mkdir -p content/2025/新文章标题

# 创建文章文件
touch content/2025/新文章标题/index.md
```

### 2. 创建年份索引文件（仅新年份需要）

如果是新年份，需要创建 `content/2025/_index.md`：

```toml
+++
transparent = true
insert_anchor_links = "left"
+++
```

### 3. 编写文章内容

文章格式示例 `content/2025/新文章标题/index.md`：

```markdown
+++
title="文章标题"
date=2025-01-15
[taxonomies]
tags=["标签1", "标签2"]

[extra]
# 可选的额外元数据
+++

这里是文章的正文内容，支持 Markdown 格式。

## 二级标题

文章内容...

### 三级标题

更多内容...
```

### 4. 构建和发布

```bash
# 1. 构建网站
make build-quick  # 推荐使用，或 make build（需要gh-stats工具）

# 2. 将构建结果复制到根目录（GitHub Pages 需要）
cp -r public/* .

# 3. 提交所有更改
git add .
git commit -m "添加新文章：文章标题"
git push origin main
```

## 重要注意事项

### Front Matter 配置

- **title**: 文章标题（必需）
- **date**: 发布日期，格式为 `YYYY-MM-DD`（必需）
- **tags**: 文章标签，用于分类（可选）
- **extra**: 额外元数据（可选）

### 文件命名规范

- 使用中文或英文命名
- 避免特殊字符和空格
- 建议使用有意义的名称

### 图片和资源

- 图片可以放在文章同一目录下
- 或者放在 `static/` 目录中
- 引用方式：`![图片描述](图片文件名.jpg)`

### GitHub Pages 部署

- 由于是 `username.github.io` 仓库，GitHub Pages 从根目录发布
- 必须将 `public/` 目录内容复制到根目录
- 需要提交源文件和构建产物

## 常用命令

```bash
# 本地预览
make serve
# 访问 http://localhost:1111

# 快速构建（推荐）
make build-quick

# 完整构建（需要gh-stats工具）
make build

# 清理构建文件
make clean
```

## 故障排除

### 如果 make build 失败

- 使用 `make build-quick` 代替
- 检查 markdown 语法是否正确
- 确认 front matter 格式正确

### 如果网站没有更新

- 确认已执行 `cp -r public/* .`
- 检查 git 提交是否包含所有文件
- 等待 GitHub Pages 部署完成（通常几分钟）

### 如果文章没有显示

- 检查日期格式是否正确
- 确认文件路径和命名正确
- 验证 front matter 语法

---

**最后更新**: 2025年1月
**维护者**: 李瑜诗词网站